# yaml-language-server: $schema=./node_modules/envio/evm.schema.json
name: olympus-convertible-deposits
networks:
- id: {{CHAIN_ID}}
  {{#if NETWORK_START_BLOCK}}
  start_block: {{NETWORK_START_BLOCK}}
  {{else}}
  start_block: 0
  {{/if}}
  contracts:
  - name: ConvertibleDepositAuctioneer
    address:
    - {{ConvertibleDepositAuctioneer}}
    {{#if ConvertibleDepositAuctioneer_BLOCK}}
    start_block: {{ConvertibleDepositAuctioneer_BLOCK}}
    {{/if}}
    handler: src/handlers/auctioneer.handlers.ts
    events:
    - event: AuctionParametersUpdated(address indexed depositAsset, uint256 newTarget, uint256 newTickSize, uint256 newMinPrice)
    - event: AuctionResult(address indexed depositAsset, uint256 ohmConvertible, uint256 target, uint8 periodIndex)
    - event: AuctionTrackingPeriodUpdated(address indexed depositAsset, uint8 newAuctionTrackingPeriod)
    - event: Bid(address indexed bidder, address indexed depositAsset, uint8 indexed depositPeriod, uint256 depositAmount, uint256 convertedAmount, uint256 positionId)
    - event: DepositPeriodDisableQueued(address indexed depositAsset, uint8 depositPeriod)
    - event: DepositPeriodDisabled(address indexed depositAsset, uint8 depositPeriod)
    - event: DepositPeriodEnableQueued(address indexed depositAsset, uint8 depositPeriod)
    - event: DepositPeriodEnabled(address indexed depositAsset, uint8 depositPeriod)
    - event: Disabled()
    - event: Enabled()
    - event: TickStepUpdated(address indexed depositAsset, uint24 newTickStep)
  - name: ConvertibleDepositFacility
    address:
    - {{ConvertibleDepositFacility}}
    {{#if ConvertibleDepositFacility_BLOCK}}
    start_block: {{ConvertibleDepositFacility_BLOCK}}
    {{/if}}
    handler: src/handlers/depositFacility.handlers.ts
    events:
    - event: AssetCommitCancelled(address indexed asset, address indexed operator, uint256 amount)
    - event: AssetCommitWithdrawn(address indexed asset, address indexed operator, uint256 amount)
    - event: AssetCommitted(address indexed asset, address indexed operator, uint256 amount)
    - event: AssetPeriodReclaimRateSet(address indexed asset, uint8 depositPeriod, uint16 reclaimRate)
    - event: ClaimedYield(address indexed asset, uint256 amount)
    - event: ConvertedDeposit(address indexed asset, address indexed depositor, uint8 periodMonths, uint256 depositAmount, uint256 convertedAmount)
    - event: CreatedDeposit(address indexed asset, address indexed depositor, uint256 indexed positionId, uint8 periodMonths, uint256 depositAmount)
    - event: Disabled()
    - event: Enabled()
    - event: OperatorAuthorized(address indexed operator)
    - event: OperatorDeauthorized(address indexed operator)
    - event: Reclaimed(address indexed user, address indexed depositToken, uint8 depositPeriod, uint256 reclaimedAmount, uint256 forfeitedAmount)
  - name: DepositRedemptionVault
    address:
    - {{DepositRedemptionVault}}
    {{#if DepositRedemptionVault_BLOCK}}
    start_block: {{DepositRedemptionVault_BLOCK}}
    {{/if}}
    handler: src/handlers/depositRedemptionVault.handlers.ts
    events:
    - event: AnnualInterestRateSet(address indexed asset, address indexed facility, uint16 rate)
    - event: ClaimDefaultRewardPercentageSet(uint16 percent)
    - event: Disabled()
    - event: Enabled()
    - event: FacilityAuthorized(address indexed facility)
    - event: FacilityDeauthorized(address indexed facility)
    - event: LoanCreated(address indexed user, uint16 indexed redemptionId, uint256 amount, address facility)
    - event: LoanDefaulted(address indexed user, uint16 indexed redemptionId, uint256 principal, uint256 interest, uint256 remainingCollateral)
    - event: LoanExtended(address indexed user, uint16 indexed redemptionId, uint256 newDueDate)
    - event: LoanRepaid(address indexed user, uint16 indexed redemptionId, uint256 principal, uint256 interest)
    - event: MaxBorrowPercentageSet(address indexed asset, address indexed facility, uint16 percent)
    - event: RedemptionCancelled(address indexed user, uint16 indexed redemptionId, address indexed depositToken, uint8 depositPeriod, uint256 amount, uint256 remainingAmount)
    - event: RedemptionFinished(address indexed user, uint16 indexed redemptionId, address indexed depositToken, uint8 depositPeriod, uint256 amount)
    - event: RedemptionStarted(address indexed user, uint16 indexed redemptionId, address indexed depositToken, uint8 depositPeriod, uint256 amount, address facility)
unordered_multichain_mode: true
preload_handlers: true
field_selection:
  transaction_fields:
    - hash
